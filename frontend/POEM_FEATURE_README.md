# 🌟 风之札记 - 诗歌生成功能

## 功能介绍

"风之札记"是一个基于AI的诗歌生成功能，用户可以输入自己的心情、日记或随想，AI会为其创作独特的现代诗歌，并提供深度的文学解读报告。

## 主要特性

### 📝 智能诗歌生成
- 基于用户输入的文字内容，AI理解情感和意境
- 生成符合用户心境的现代诗歌
- 提供情感关键词和文学推荐

### 🔍 深度解读报告
- 对生成的诗歌进行专业的文学分析
- 解读诗歌的情感表达和艺术特色
- 提供创作灵感和相关主题建议

### 📚 作品历史管理
- 保存用户的所有诗歌作品
- 支持查看历史创作记录
- 便于回顾和管理个人诗歌作品集

## 技术实现

### 前端技术栈
- **框架**: Next.js 14 + React 18
- **UI组件**: Ant Design 5.x
- **样式**: CSS Modules + 渐变背景
- **类型检查**: TypeScript
- **状态管理**: React Hooks

### 后端技术栈
- **框架**: Spring Boot
- **AI集成**: LangChain4j
- **AI模型**: SiliconFlow Kimi-K2-Instruct-0905
- **数据库**: MySQL
- **ORM**: MyBatis-Plus

### API接口
```
POST /api/poem/generate          # 生成诗歌
POST /api/poem/{id}/analysis     # 生成解读报告
GET  /api/poem/{id}              # 获取诗歌详情
```

## 页面结构

### 1. 主创作页面 (`/poem`)
- 诗歌输入组件 (`PoemInput`)
- 诗歌展示组件 (`PoemDisplay`)
- 使用指南和介绍

### 2. 历史作品页面 (`/poem/history`)
- 作品列表展示
- 作品详情查看
- 搜索和筛选功能

## 组件说明

### PoemInput 组件
**位置**: `/src/components/PoemInput/`

**功能**:
- 提供多行文本输入框
- 支持键盘快捷键 (Ctrl+Enter)
- 字数限制和提示
- 生成状态指示

**主要属性**:
```tsx
interface PoemInputProps {
  onPoemGenerated?: (poem: PoemWithId) => void;
}
```

### PoemDisplay 组件
**位置**: `/src/components/PoemDisplay/`

**功能**:
- 展示生成的诗歌内容
- 显示关键词和推荐作品
- 支持生成解读报告
- 优雅的卡片式布局

**主要属性**:
```tsx
interface PoemDisplayProps {
  poem: PoemWithId;
}
```

## 数据模型

### 诗歌响应结构
```typescript
interface PoemResponse {
  title: string;           // 诗歌标题
  keywords: string[];      // 关键词 (3-6个)
  poem: string;           // 诗歌正文
  recommendations: string[]; // 推荐作品 (2-3个)
}
```

### 解读报告结构
```typescript
interface PoemAnalysisResponse {
  analysis: string;        // 深度解读
  style: string;          // 风格特点
  inspiration: string;    // 创作灵感
  relatedThemes: string[]; // 相关主题 (3-6个)
}
```

## 使用流程

### 1. 创作诗歌
1. 访问 `/poem` 页面
2. 在输入框中写下心情、日记或想法
3. 点击"生成诗歌"按钮或使用 Ctrl+Enter
4. 等待AI生成结果

### 2. 查看解读
1. 在诗歌展示区域点击"生成解读报告"
2. 查看AI对诗歌的深度分析
3. 获取创作灵感和相关主题建议

### 3. 管理作品
1. 访问 `/poem/history` 页面
2. 浏览历史创作记录
3. 点击查看详情重温作品

## 样式设计

### 设计理念
- **渐变背景**: 营造梦幻诗意的氛围
- **毛玻璃效果**: 现代化的视觉体验
- **优雅动画**: 提升交互的流畅感
- **响应式布局**: 适配各种设备尺寸

### 色彩方案
- **主色调**: 紫蓝渐变 (#667eea → #764ba2)
- **辅助色**: 橙红渐变 (#ff6b6b → #ee5a24)
- **背景色**: 半透明白色面板
- **文字色**: 深蓝灰色 (#2c3e50)

## 错误处理

### 前端错误处理
- 输入验证和提示
- API调用失败重试
- 用户友好的错误消息
- 加载状态指示

### 后端错误处理
- 参数校验和业务异常
- AI服务调用异常处理
- 数据库操作异常处理
- 统一的错误响应格式

## 性能优化

### 前端优化
- 组件懒加载
- 图片和资源优化
- 防抖处理用户输入
- 合理的状态管理

### 后端优化
- 数据库连接池配置
- AI服务调用超时设置
- 缓存策略（可扩展）
- 异步处理长时间任务

## 扩展建议

### 功能扩展
1. **多语言支持**: 支持英文诗歌生成
2. **诗歌风格选择**: 古体诗、现代诗、自由诗等
3. **社交分享**: 分享诗歌到社交平台
4. **音频朗读**: TTS语音朗读诗歌
5. **诗歌收藏**: 收藏喜欢的诗歌作品

### 技术扩展
1. **实时流式输出**: WebSocket实现实时生成
2. **离线模式**: PWA支持离线使用
3. **数据分析**: 用户创作习惯分析
4. **个性化推荐**: 基于历史的智能推荐

## 部署说明

### 前端部署
```bash
# 安装依赖
npm install

# 开发模式
npm run dev

# 生产构建
npm run build
npm start
```

### 后端部署
1. 确保数据库已创建相关表结构
2. 配置AI模型API密钥
3. 启动Spring Boot应用
4. 验证接口可用性

## 注意事项

1. **API密钥安全**: 请妥善保管AI服务的API密钥
2. **数据隐私**: 用户输入的文本涉及隐私，需要安全处理
3. **性能监控**: 关注AI服务调用的响应时间和成功率
4. **内容审核**: 建议添加内容审核机制防止不当内容

## 联系支持

如有问题或建议，请联系开发团队。
